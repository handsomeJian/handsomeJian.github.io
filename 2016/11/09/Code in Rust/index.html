
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Code in Rust | handsomeJian</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Variable BindingsRust will automatically give the variable you set a type. Unless you rebind the variable, it can not become another type of data. You can announce the variable’s type by yourself anyw">
<meta property="og:type" content="article">
<meta property="og:title" content="Code in Rust">
<meta property="og:url" content="http://handsomeJian.github.io/2016/11/09/Code in Rust/index.html">
<meta property="og:site_name" content="handsomeJian">
<meta property="og:description" content="Variable BindingsRust will automatically give the variable you set a type. Unless you rebind the variable, it can not become another type of data. You can announce the variable’s type by yourself anyw">
<meta property="og:updated_time" content="2016-12-28T11:57:36.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Code in Rust">
<meta name="twitter:description" content="Variable BindingsRust will automatically give the variable you set a type. Unless you rebind the variable, it can not become another type of data. You can announce the variable’s type by yourself anyw">
  
    <link rel="alternative" href="/atom.xml" title="handsomeJian" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">handsomeJian</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="http://www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="handsomeJian.github.io">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main"><article id="post-Code in Rust" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/09/Code in Rust/" class="article-date">
  <time datetime="2016-11-08T16:00:00.000Z" itemprop="datePublished">2016-11-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Code in Rust
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Variable-Bindings"><a href="#Variable-Bindings" class="headerlink" title="Variable Bindings"></a>Variable Bindings</h1><p>Rust will automatically give the variable you set a type. Unless you rebind the variable, it can not become another type of data. You can announce the variable’s type by yourself anyway. And the variable defeats to be immutable, if you want the variable mutable you have to add <code>mut</code> before the var.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> x = <span class="number">1</span>; <span class="comment">// set x to 1</span></div><div class="line"><span class="keyword">let</span> (x, y, z) = (<span class="number">1</span>, <span class="number">5.0</span>, <span class="string">"haha"</span>); <span class="comment">// set more variable in same time</span></div><div class="line"><span class="keyword">let</span> x: <span class="keyword">i32</span> = <span class="number">5</span>; <span class="comment">// type annotation</span></div><div class="line"><span class="keyword">let</span> <span class="keyword">mut</span> x: <span class="keyword">i32</span>; <span class="comment">// set the variable's type as int32 (initialize)</span></div><div class="line"><span class="keyword">let</span> <span class="keyword">mut</span> x = <span class="number">7</span>;</div><div class="line"><span class="keyword">let</span> x = x; <span class="comment">// now x is immutable and is bound to 7</span></div></pre></td></tr></table></figure>
<ul>
<li><h3 id="Types-of-variables"><a href="#Types-of-variables" class="headerlink" title="Types of variables"></a>Types of variables</h3><p><code>bool</code> <code>char</code> <code>i8</code> <code>i16</code> <code>i32</code> <code>i64</code> <code>u8</code> <code>u16</code> <code>u32</code> <code>u64</code> <code>isize</code> <code>usize</code> <code>f32</code> <code>f64</code></p>
</li>
<li><h3 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h3></li>
</ul>
<p>Arrays have type [T; N].<br><strong>By default, arrays are immutable</strong></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// a: [i32; 3]</span></div><div class="line"><span class="keyword">let</span> <span class="keyword">mut</span> m = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// m: [i32; 3]</span></div><div class="line"><span class="keyword">let</span> a = [<span class="number">0</span>; <span class="number">20</span>]; <span class="comment">// all elements in a is 0 (shorthand for initializing)</span></div></pre></td></tr></table></figure>
<ul>
<li><h3 id="Tuples"><a href="#Tuples" class="headerlink" title="Tuples"></a>Tuples</h3></li>
</ul>
<p>Rust also have tuples which can include different types of variable in one tuple.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> <span class="keyword">mut</span> x: (<span class="keyword">i32</span>, &amp;<span class="keyword">str</span>) = (<span class="number">1</span>, <span class="string">"hello"</span>);</div><div class="line"><span class="keyword">let</span> (x, y, z) = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</div><div class="line"><span class="keyword">let</span> x = (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</div><div class="line"><span class="keyword">let</span> y = x.<span class="number">0</span>;</div></pre></td></tr></table></figure>
<p><strong>Tuples use <code>.</code> to index!</strong></p>
<h1 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h1><p>Use <code>//</code> to write a comment or use <code>///</code> to write a doc comment.</p>
<blockquote>
<p>There is another style of doc comment, <code>//!</code>, to comment containing items.Commonly used inside crates root (lib.rs) or modules root (mod.rs).</p>
</blockquote>
<h1 id="if"><a href="#if" class="headerlink" title="if"></a>if</h1><figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">let</span> x = <span class="number">5</span>;</div><div class="line"></div><div class="line"><span class="keyword">if</span> x == <span class="number">5</span> &#123;</div><div class="line">    <span class="built_in">println!</span>(<span class="string">"x is five!"</span>);</div><div class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> x == <span class="number">6</span> &#123;</div><div class="line">    <span class="built_in">println!</span>(<span class="string">"x is six!"</span>);</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    <span class="built_in">println!</span>(<span class="string">"x is not five or six :("</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> y = <span class="keyword">if</span> x == <span class="number">5</span> &#123; <span class="number">10</span> &#125; <span class="keyword">else</span> &#123; <span class="number">15</span> &#125;;</div></pre></td></tr></table></figure>
<h1 id="Loops"><a href="#Loops" class="headerlink" title="Loops"></a>Loops</h1><figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">loop</span> &#123; <span class="comment">// this is equal to "while true"</span></div><div class="line">	<span class="built_in">println!</span>(<span class="string">"Loop forever!"</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">while</span> <span class="literal">true</span> &#123;</div><div class="line">	<span class="built_in">println!</span>(<span class="string">"hehe"</span>);</div><div class="line">&#125;</div><div class="line"><span class="keyword">for</span> x <span class="keyword">in</span> <span class="number">0</span>..<span class="number">10</span> &#123;</div><div class="line">	<span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, x);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Rust have loop labels, that’s great.</p>
<blockquote>
<p>In a situation where you would like to break or continue for one of the outer loops, you can use labels to specify which loop the break or continue statement applies to.</p>
</blockquote>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">'outer</span>: <span class="keyword">for</span> x <span class="keyword">in</span> <span class="number">0</span>..<span class="number">10</span> &#123;</div><div class="line">    <span class="symbol">'inner</span>: <span class="keyword">for</span> y <span class="keyword">in</span> <span class="number">0</span>..<span class="number">10</span> &#123;</div><div class="line">        <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">0</span> &#123; <span class="keyword">continue</span> <span class="symbol">'outer</span>; &#125; <span class="comment">// continues the loop over x</span></div><div class="line">        <span class="keyword">if</span> y % <span class="number">2</span> == <span class="number">0</span> &#123; <span class="keyword">continue</span> <span class="symbol">'inner</span>; &#125; <span class="comment">// continues the loop over y</span></div><div class="line">        <span class="built_in">println!</span>(<span class="string">"x: &#123;&#125;, y: &#123;&#125;"</span>, x, y);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>When you need to keep track of how many times you already looped, you can use the <code>.enumerate()</code> function.</p>
</blockquote>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> (index, value) <span class="keyword">in</span> (<span class="number">5</span>..<span class="number">10</span>).enumerate() &#123;</div><div class="line">    <span class="built_in">println!</span>(<span class="string">"index = &#123;&#125; and value = &#123;&#125;"</span>, index, value);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Vectors"><a href="#Vectors" class="headerlink" title="Vectors"></a>Vectors</h1><figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Creat a vector</span></div><div class="line"><span class="keyword">let</span> v = <span class="built_in">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line"><span class="keyword">let</span> v= <span class="built_in">vec!</span>[<span class="number">0</span>; <span class="number">10</span>]; <span class="comment">// ten 0s</span></div><div class="line"></div><div class="line"><span class="comment">//Index the value</span></div><div class="line"><span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, v[<span class="number">2</span>]);</div><div class="line"><span class="keyword">let</span> i: unsize = <span class="number">0</span>; <span class="comment">// Must use usize type</span></div><div class="line"><span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, v[i]);</div></pre></td></tr></table></figure>
<p><strong>You must index vectors using <code>unsize</code> type but not a i32 or others.</strong></p>
<ul>
<li><h3 id="Out-of-bounds-Access"><a href="#Out-of-bounds-Access" class="headerlink" title="Out-of-bounds Access"></a>Out-of-bounds Access</h3>You may panic if you try to access an index that doesn’t exist. You can use <code>get</code> or <code>get_mut</code> that return <code>None</code> when given an invalid index.</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> v = <span class="built_in">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</div><div class="line"><span class="keyword">match</span> v.get(<span class="number">7</span>) &#123;</div><div class="line">    <span class="literal">Some</span>(x) =&gt; <span class="built_in">println!</span>(<span class="string">"Item 7 is &#123;&#125;"</span>, x),</div><div class="line">    <span class="literal">None</span> =&gt; <span class="built_in">println!</span>(<span class="string">"Sorry, this vector is too short."</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><h3 id="Loop-with-vector"><a href="#Loop-with-vector" class="headerlink" title="Loop with vector"></a>Loop with vector</h3></li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> <span class="keyword">mut</span> v = <span class="built_in">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &amp;v &#123;</div><div class="line">    <span class="built_in">println!</span>(<span class="string">"A reference to &#123;&#125;"</span>, i);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &amp;<span class="keyword">mut</span> v &#123;</div><div class="line">    <span class="built_in">println!</span>(<span class="string">"A mutable reference to &#123;&#125;"</span>, i);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> v &#123;</div><div class="line">    <span class="built_in">println!</span>(<span class="string">"Take ownership of the vector and its element &#123;&#125;"</span>, i);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Note: You <strong>cannot use the vector again</strong> once you have iterated by taking ownership of the vector. You can iterate the vector multiple times by taking a reference to the vector whilst iterating. For example, the following code does not compile.</p>
<ul>
<li><h3 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h3></li>
<li><code>push()</code></li>
<li><code>pop()</code></li>
</ul>
<h1 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h1><p>You have to announce the type of the args you get in the function and the return type of your function. If you don’t announce the return type, it will be like a procedure.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fn</span> <span class="title">func_name</span></span>(x : <span class="keyword">i32</span>, y : <span class="keyword">i32</span>) -&gt; <span class="keyword">i32</span> &#123;</div><div class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125;, &#123;&#125;"</span>, x, y);</div><div class="line">    <span class="keyword">return</span> x + y;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Structs"><a href="#Structs" class="headerlink" title="Structs"></a>Structs</h1><p>In Rust, whether a struct is mutable depends where you create its instances but not where you define it.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span></span> &#123;</div><div class="line">    x: <span class="keyword">i32</span>,</div><div class="line">    y: <span class="keyword">i32</span>,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</div><div class="line">	<span class="keyword">let</span> impoint = Point &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;;</div><div class="line">	<span class="keyword">let</span> <span class="keyword">mut</span> point = Point &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>You can use <code>..</code> to update a struct with an already-existed struct.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point3d</span></span> &#123;</div><div class="line">    x: <span class="keyword">i32</span>,</div><div class="line">    y: <span class="keyword">i32</span>,</div><div class="line">    z: <span class="keyword">i32</span>,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> origin = Point3d &#123; x: <span class="number">0</span>, y: <span class="number">0</span>, z: <span class="number">0</span> &#125;;</div><div class="line"><span class="keyword">let</span> point = Point3d &#123; z: <span class="number">1</span>, x: <span class="number">2</span>, .. origin &#125;;</div><div class="line"><span class="keyword">let</span> point = Point3d &#123; y: <span class="number">1</span>, ..origin&#125;;</div></pre></td></tr></table></figure>
<ul>
<li><h3 id="Tuple-structs"><a href="#Tuple-structs" class="headerlink" title="Tuple structs"></a>Tuple structs</h3>It’s just a syntactic sugar. Tuple structs are just like structs with their fields not having names.<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Color</span></span>(<span class="keyword">i32</span>, <span class="keyword">i32</span>, <span class="keyword">i32</span>);</div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span></span>(<span class="keyword">i32</span>, <span class="keyword">i32</span>, <span class="keyword">i32</span>);</div><div class="line"></div><div class="line"><span class="keyword">let</span> black = Color(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line"><span class="keyword">let</span> origin = Point(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="Enums"><a href="#Enums" class="headerlink" title="Enums"></a>Enums</h1><p>It’s kind like a ‘sum type’ which means it can match different type of variants.<br>We use <code>::</code> to use the name of each variant.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Message</span></span> &#123;</div><div class="line">    Quit,</div><div class="line">    ChangeColor(<span class="keyword">i32</span>, <span class="keyword">i32</span>, <span class="keyword">i32</span>),</div><div class="line">    Move &#123; x: <span class="keyword">i32</span>, y: <span class="keyword">i32</span> &#125;,</div><div class="line">    Write(<span class="built_in">String</span>),</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> x: Message = Message::Move &#123; x: <span class="number">3</span>, y: <span class="number">4</span> &#125;;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">BoardGameTurn</span></span> &#123;</div><div class="line">    Move &#123; squares: <span class="keyword">i32</span> &#125;,</div><div class="line">    Pass,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> y: BoardGameTurn = BoardGameTurn::Move &#123; squares: <span class="number">1</span> &#125;;</div></pre></td></tr></table></figure>
<h1 id="Match"><a href="#Match" class="headerlink" title="Match"></a>Match</h1><p>Just like C++ have <code>switch</code>, rust have <code>match</code>. It’s used to match many kinds of situation that you may use lots of <code>if/else</code>. And the <code>_</code> match everything else. Match is also an expression so that you can use <code>let</code> with it.</p>
<p>If you want to get a reference, use the <code>ref</code> or <code>ref mut</code> keyword.<br>Use <code>_</code> to ignore the type and value.<br>You can also use <code>..</code> in a pattern to disregard multiple values.<br>You can also use <code>|</code> to match multiple patterns.<br>You can match a range of values with <code>...</code><br>You can bind values to names with <code>@</code></p>
<h3 id="Destructuring"><a href="#Destructuring" class="headerlink" title="Destructuring"></a>Destructuring</h3><p>Use <code>:</code> to give a value a different name.<br>Use <code>..</code> to get only some of the values in a struct.<br><em>Mention that destructuring behavior can only be used for compound data type like <code>enums</code> or <code>tuples</code>.</em></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Use of _</span></div><div class="line"><span class="keyword">let</span> x = <span class="number">5</span>;</div><div class="line"></div><div class="line"><span class="keyword">match</span> x &#123;</div><div class="line">    <span class="number">1</span> | <span class="number">3</span> =&gt; <span class="built_in">println!</span>(<span class="string">"one"</span>),</div><div class="line">    <span class="number">2</span> =&gt; <span class="built_in">println!</span>(<span class="string">"two"</span>),</div><div class="line">    _ =&gt; <span class="built_in">println!</span>(<span class="string">"something else"</span>),</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> number = <span class="keyword">match</span> x &#123;</div><div class="line">    <span class="number">1</span> =&gt; <span class="string">"one"</span>,</div><div class="line">    <span class="number">5</span> =&gt; <span class="string">"five"</span>,</div><div class="line">    _ =&gt; <span class="string">"something else"</span>,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">fn</span> <span class="title">somefunc</span></span>() -&gt; (<span class="keyword">i32</span>, <span class="keyword">i32</span>, <span class="keyword">i32</span>) &#123;</div><div class="line">	<span class="comment">// return some sort of triple tuple</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span>(x, _, z) = somefunc();</div><div class="line"></div><div class="line"><span class="comment">//**********************************************************</span></div><div class="line"><span class="comment">// Use of ..</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span></span> &#123;</div><div class="line">    x: <span class="keyword">i32</span>,</div><div class="line">    y: <span class="keyword">i32</span>,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> point = Point &#123; x: <span class="number">2</span>, y: <span class="number">3</span> &#125;;</div><div class="line"></div><div class="line"><span class="keyword">match</span> point &#123;</div><div class="line">    Point &#123; y, .. &#125; =&gt; <span class="built_in">println!</span>(<span class="string">"x is &#123;&#125;"</span>, x),</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//**********************************************************</span></div><div class="line"><span class="comment">// Use of :</span></div><div class="line"><span class="keyword">let</span> origin = Point &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;;</div><div class="line"></div><div class="line"><span class="keyword">match</span> origin &#123;</div><div class="line">    Point &#123; x: x1, y: y1 &#125; =&gt; <span class="built_in">println!</span>(<span class="string">"(&#123;&#125;,&#123;&#125;)"</span>, x1, y1),</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//**********************************************************</span></div><div class="line"><span class="comment">// Use of ... (range)</span></div><div class="line"><span class="keyword">let</span> x = <span class="number">1</span>;</div><div class="line"></div><div class="line"><span class="keyword">match</span> x &#123;</div><div class="line">    <span class="number">1</span> ... <span class="number">5</span> =&gt; <span class="built_in">println!</span>(<span class="string">"one through five"</span>),</div><div class="line">    _ =&gt; <span class="built_in">println!</span>(<span class="string">"anything"</span>),</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//**********************************************************</span></div><div class="line"><span class="comment">// Use of ..</span></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">OptionalTuple</span></span> &#123;</div><div class="line">    Value(<span class="keyword">i32</span>, <span class="keyword">i32</span>, <span class="keyword">i32</span>),</div><div class="line">    Missing,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> x = OptionalTuple::Value(<span class="number">5</span>, -<span class="number">2</span>, <span class="number">3</span>);</div><div class="line"></div><div class="line"><span class="keyword">match</span> x &#123;</div><div class="line">    OptionalTuple::Value(..) =&gt; <span class="built_in">println!</span>(<span class="string">"Got a tuple!"</span>),</div><div class="line">    OptionalTuple::Missing =&gt; <span class="built_in">println!</span>(<span class="string">"No such luck."</span>),</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//**********************************************************</span></div><div class="line"><span class="comment">// Use of @</span></div><div class="line"><span class="keyword">let</span> x = <span class="number">5</span>;</div><div class="line"></div><div class="line"><span class="keyword">match</span> x &#123;</div><div class="line">    e @ <span class="number">1</span> ... <span class="number">5</span> | e @ <span class="number">8</span> ... <span class="number">10</span> =&gt; <span class="built_in">println!</span>(<span class="string">"got a range element &#123;&#125;"</span>, e),</div><div class="line">    _ =&gt; <span class="built_in">println!</span>(<span class="string">"anything"</span>),</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="meta">#[derive(Debug)]</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Person</span></span> &#123;</div><div class="line">    name: <span class="built_in">Option</span>&lt;<span class="built_in">String</span>&gt;,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> name = <span class="string">"Steve"</span>.to_string();</div><div class="line"><span class="keyword">let</span> x: <span class="built_in">Option</span>&lt;Person&gt; = <span class="literal">Some</span>(Person &#123; name: <span class="literal">Some</span>(name) &#125;);</div><div class="line"><span class="keyword">match</span> x &#123;</div><div class="line">    <span class="literal">Some</span>(Person &#123; name: <span class="keyword">ref</span> a @ <span class="literal">Some</span>(_), .. &#125;) =&gt; <span class="built_in">println!</span>(<span class="string">"&#123;:?&#125;"</span>, a),</div><div class="line">    _ =&gt; &#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><h3 id="Matching-on-enums"><a href="#Matching-on-enums" class="headerlink" title="Matching on enums"></a>Matching on enums</h3></li>
</ul>
<p>Match can process the possible variants of an enum. <strong>You have to match every variant of the enum or use <code>_</code>.</strong></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Message</span></span> &#123;</div><div class="line">    Quit,</div><div class="line">    ChangeColor(<span class="keyword">i32</span>, <span class="keyword">i32</span>, <span class="keyword">i32</span>),</div><div class="line">    Move &#123; x: <span class="keyword">i32</span>, y: <span class="keyword">i32</span> &#125;,</div><div class="line">    Write(<span class="built_in">String</span>),</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">fn</span> <span class="title">quit</span></span>() &#123; <span class="comment">/* ... */</span> &#125;</div><div class="line"><span class="function"><span class="keyword">fn</span> <span class="title">change_color</span></span>(r: <span class="keyword">i32</span>, g: <span class="keyword">i32</span>, b: <span class="keyword">i32</span>) &#123; <span class="comment">/* ... */</span> &#125;</div><div class="line"><span class="function"><span class="keyword">fn</span> <span class="title">move_cursor</span></span>(x: <span class="keyword">i32</span>, y: <span class="keyword">i32</span>) &#123; <span class="comment">/* ... */</span> &#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">fn</span> <span class="title">process_message</span></span>(msg: Message) &#123;</div><div class="line">    <span class="keyword">match</span> msg &#123;</div><div class="line">        Message::Quit =&gt; quit(),</div><div class="line">        Message::ChangeColor(r, g, b) =&gt; change_color(r, g, b),</div><div class="line">        Message::Move &#123; x: x, y: y &#125; =&gt; move_cursor(x, y),</div><div class="line">        Message::Write(s) =&gt; <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, s),</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><h3 id="Match-guards"><a href="#Match-guards" class="headerlink" title="Match guards"></a>Match guards</h3>This can give your match a specific condition.</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> x = <span class="number">4</span>;</div><div class="line"><span class="keyword">let</span> y = <span class="literal">false</span>;</div><div class="line"></div><div class="line"><span class="keyword">match</span> x &#123;</div><div class="line">    <span class="number">4</span> | <span class="number">5</span> <span class="keyword">if</span> y =&gt; <span class="built_in">println!</span>(<span class="string">"yes"</span>), <span class="comment">// equal to (4 | 5) if y  but not 4 | (5 if y)</span></div><div class="line">    _ =&gt; <span class="built_in">println!</span>(<span class="string">"no"</span>),</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Method-Syntax"><a href="#Method-Syntax" class="headerlink" title="Method Syntax"></a>Method Syntax</h1><p>This is a bunch of functions that are applied to specific customized type of data.<br>You can use this ability by <code>impl</code>.And you can use it many times.<br>The first parameter should be <code>self</code> or <code>&amp;self</code> or <code>&amp;mut self</code> that represent the data itself.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Circle</span></span> &#123;</div><div class="line">    x: <span class="keyword">f64</span>,</div><div class="line">    y: <span class="keyword">f64</span>,</div><div class="line">    radius: <span class="keyword">f64</span>,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">impl</span> Circle &#123;</div><div class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">reference</span></span>(&amp;<span class="keyword">self</span>) &#123;</div><div class="line">       <span class="built_in">println!</span>(<span class="string">"taking self by reference!"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">mutable_reference</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</div><div class="line">       <span class="built_in">println!</span>(<span class="string">"taking self by mutable reference!"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">impl</span> Circle &#123;</div><div class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">takes_ownership</span></span>(<span class="keyword">self</span>) &#123;</div><div class="line">       <span class="built_in">println!</span>(<span class="string">"taking ownership of self!"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><h3 id="Method-Chaining"><a href="#Method-Chaining" class="headerlink" title="Method Chaining"></a>Method Chaining</h3>When we use <code>foo.bar().baz()</code>, we are using a “method chaining”.<br>And the return type of the function should be the type that you use <code>impl</code> to.</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">impl</span> Circle &#123;</div><div class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">area</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="keyword">f64</span> &#123;</div><div class="line">        std::f64::consts::PI * (<span class="keyword">self</span>.radius * <span class="keyword">self</span>.radius)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">grow</span></span>(&amp;<span class="keyword">self</span>, increment: <span class="keyword">f64</span>) -&gt; Circle &#123;</div><div class="line">        Circle &#123; x: <span class="keyword">self</span>.x, y: <span class="keyword">self</span>.y, radius: <span class="keyword">self</span>.radius + increment &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</div><div class="line">    <span class="keyword">let</span> c = Circle &#123; x: <span class="number">0.0</span>, y: <span class="number">0.0</span>, radius: <span class="number">2.0</span> &#125;;</div><div class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, c.area());</div><div class="line"></div><div class="line">    <span class="keyword">let</span> d = c.grow(<span class="number">2.0</span>).area();</div><div class="line">    <span class="built_in">println!</span>(<span class="string">"&#123;&#125;"</span>, d);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><h3 id="Associated-Functions"><a href="#Associated-Functions" class="headerlink" title="Associated Functions"></a>Associated Functions</h3>This is useful that you may think it as a class method that don’t need a instance in python.  </li>
</ul>
<blockquote>
<p>Some other languages call associated functions “static methods”.  </p>
</blockquote>
<p>To realize this, you won’t take <code>self</code> as an parameter.  </p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">impl</span> Circle &#123;</div><div class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">new</span></span>(x: <span class="keyword">f64</span>, y: <span class="keyword">f64</span>, radius: <span class="keyword">f64</span>) -&gt; Circle &#123;</div><div class="line">        Circle &#123;</div><div class="line">            x: x,</div><div class="line">            y: y,</div><div class="line">            radius: radius,</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123;</div><div class="line">    <span class="keyword">let</span> c = Circle::new(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">2.0</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><h3 id="Builder-Pattern"><a href="#Builder-Pattern" class="headerlink" title="Builder Pattern"></a>Builder Pattern</h3>In a normal way, if you want to use a struct, you have to set all the members in the struct. You can use the “associated functions” mentioned above to realize this. Or you can use a interesting way to do this. Here is an example and it’s called a builder pattern.<br>Though it’s a little complex, I think it’s a new way of coding (for me).</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Circle</span></span> &#123;</div><div class="line">    x: <span class="keyword">f64</span>,</div><div class="line">    y: <span class="keyword">f64</span>,</div><div class="line">    radius: <span class="keyword">f64</span>,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">impl</span> Circle &#123;</div><div class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">area</span></span>(&amp;<span class="keyword">self</span>) -&gt; <span class="keyword">f64</span> &#123;</div><div class="line">        std::f64::consts::PI * (<span class="keyword">self</span>.radius * <span class="keyword">self</span>.radius)</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">CircleBuilder</span></span> &#123;</div><div class="line">    x: <span class="keyword">f64</span>,</div><div class="line">    y: <span class="keyword">f64</span>,</div><div class="line">    radius: <span class="keyword">f64</span>,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">impl</span> CircleBuilder &#123;</div><div class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">new</span></span>() -&gt; CircleBuilder &#123;</div><div class="line">        CircleBuilder &#123; x: <span class="number">0.0</span>, y: <span class="number">0.0</span>, radius: <span class="number">1.0</span>, &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">x</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, coordinate: <span class="keyword">f64</span>) -&gt; &amp;<span class="keyword">mut</span> CircleBuilder &#123;</div><div class="line">        <span class="keyword">self</span>.x = coordinate;</div><div class="line">        <span class="keyword">self</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">y</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, coordinate: <span class="keyword">f64</span>) -&gt; &amp;<span class="keyword">mut</span> CircleBuilder &#123;</div><div class="line">        <span class="keyword">self</span>.y = coordinate;</div><div class="line">        <span class="keyword">self</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">radius</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>, radius: <span class="keyword">f64</span>) -&gt; &amp;<span class="keyword">mut</span> CircleBuilder &#123;</div><div class="line">        <span class="keyword">self</span>.radius = radius;</div><div class="line">        <span class="keyword">self</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">finalize</span></span>(&amp;<span class="keyword">self</span>) -&gt; Circle &#123;</div><div class="line">        Circle &#123; x: <span class="keyword">self</span>.x, y: <span class="keyword">self</span>.y, radius: <span class="keyword">self</span>.radius &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">fn</span> <span class="title">main</span></span>() &#123; <span class="comment">// Here is the example of builder pattern</span></div><div class="line">    <span class="keyword">let</span> c = CircleBuilder::new()</div><div class="line">                .x(<span class="number">1.0</span>)</div><div class="line">                .y(<span class="number">2.0</span>)</div><div class="line">                .radius(<span class="number">2.0</span>)</div><div class="line">                .finalize();</div><div class="line"></div><div class="line">    <span class="built_in">println!</span>(<span class="string">"area: &#123;&#125;"</span>, c.area());</div><div class="line">    <span class="built_in">println!</span>(<span class="string">"x: &#123;&#125;"</span>, c.x);</div><div class="line">    <span class="built_in">println!</span>(<span class="string">"y: &#123;&#125;"</span>, c.y);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="String"><a href="#String" class="headerlink" title="String"></a>String</h1><p>Rust has two kinds of strings: <code>&amp;str</code> and <code>String</code>. <code>String</code> is a heap-allocated string and it’s growable.</p>
<p><code>String</code>s are commonly created by converting from a string slice using the <code>to_string()</code> method.</p>
<p>And <code>String</code> will coerce into <code>&amp;str</code> with an <code>&amp;</code>.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> greeting = <span class="string">"Hello there."</span>; <span class="comment">// greeting: &amp;'static str</span></div><div class="line"><span class="keyword">let</span> <span class="keyword">mut</span> s = <span class="string">"Hello"</span>.to_string(); <span class="comment">// mut s: String</span></div><div class="line">s.push_str(<span class="string">", world."</span>); <span class="comment">// s: "Hello, world."</span></div></pre></td></tr></table></figure>
<blockquote>
<p><strong>Mention: Viewing a <code>String</code> as a <code>&amp;str</code> is cheap, but converting the <code>&amp;str</code> to a <code>String</code> involves allocating memory. No reason to do that unless you have to!</strong></p>
</blockquote>
<ul>
<li><h3 id="Indexing"><a href="#Indexing" class="headerlink" title="Indexing"></a>Indexing</h3>Index is not allowed using <code>[]</code>, because strings are valid UTF-8. You can use the following methods to ‘index’ a certain char in a string. If you want to index, you have to walk from the beginning of the list of chars.</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> hachiko = <span class="string">"忠犬ハチ公"</span>;</div><div class="line"><span class="keyword">for</span> c <span class="keyword">in</span> hachiko.chars() &#123;</div><div class="line">    <span class="built_in">print!</span>(<span class="string">"&#123;&#125;, "</span>, c);</div><div class="line">&#125;</div><div class="line"><span class="keyword">let</span> dog = hachiko.chars().nth(<span class="number">1</span>);</div></pre></td></tr></table></figure>
<ul>
<li><h3 id="Concatenation"><a href="#Concatenation" class="headerlink" title="Concatenation"></a>Concatenation</h3>If you have a <code>String</code>, you can concatenate a <code>&amp;str</code> to the end of it. But if you have two <code>String</code>s, you need an <code>&amp;</code>.</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> hello = <span class="string">"Hello "</span>.to_string();</div><div class="line"><span class="keyword">let</span> world = <span class="string">"world!"</span>;</div><div class="line"><span class="keyword">let</span> hello_world = hello + world;</div><div class="line"></div><div class="line"><span class="keyword">let</span> hello = <span class="string">"Hello "</span>.to_string();</div><div class="line"><span class="keyword">let</span> world = <span class="string">"world!"</span>.to_string();</div><div class="line"><span class="keyword">let</span> hello_world = hello + &amp;world; <span class="comment">// Here you need an '&amp;'</span></div></pre></td></tr></table></figure>
<h1 id="Else"><a href="#Else" class="headerlink" title="Else"></a>Else</h1><ul>
<li><h3 id="About-Copy"><a href="#About-Copy" class="headerlink" title="About Copy"></a>About Copy</h3></li>
</ul>
<p>State that a customized type can be copied.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#[derive(Copy)]</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Foo</span></span>(<span class="keyword">i32</span>);</div></pre></td></tr></table></figure>
<ul>
<li><h3 id="Option"><a href="#Option" class="headerlink" title="Option"></a>Option</h3></li>
</ul>
<p>You can use <code>match</code> or <code>if let</code>to get value form an Option.</p>
<p>Or use <code>unwrap()</code> to get the value in an Option if it’s <code>Some()</code>, <strong>mention that <code>unwrap()</code> will take the ownership.</strong></p>
<p>Also you can use <code>unwrap_or()</code>. This returns the contained value or a default.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="literal">Some</span>(x) = option &#123;</div><div class="line">    foo(x);</div><div class="line">&#125; <span class="keyword">else</span> &#123;</div><div class="line">    bar();</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="built_in">assert_eq!</span>(<span class="literal">Some</span>(<span class="string">"car"</span>).unwrap_or(<span class="string">"bike"</span>), <span class="string">"car"</span>);</div><div class="line"><span class="built_in">assert_eq!</span>(<span class="literal">None</span>.unwrap_or(<span class="string">"bike"</span>), <span class="string">"bike"</span>);</div></pre></td></tr></table></figure>
<ul>
<li><h3 id="Generic"><a href="#Generic" class="headerlink" title="Generic"></a>Generic</h3></li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">fn</span> <span class="title">takes_two_things</span></span>&lt;T, U&gt;(x: T, y: U) -&gt; T &#123;</div><div class="line">    <span class="comment">// ...</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span></span>&lt;T&gt; &#123;</div><div class="line">    x: T,</div><div class="line">    y: T,</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">let</span> int_origin = Point &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;;</div><div class="line"><span class="keyword">let</span> float_origin = Point &#123; x: <span class="number">0.0</span>, y: <span class="number">0.0</span> &#125;;</div><div class="line"></div><div class="line"><span class="keyword">impl</span>&lt;T&gt; Point&lt;T&gt; &#123;</div><div class="line">    <span class="function"><span class="keyword">fn</span> <span class="title">swap</span></span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) &#123;</div><div class="line">        std::mem::swap(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>.x, &amp;<span class="keyword">mut</span> <span class="keyword">self</span>.y);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://handsomeJian.github.io/2016/11/09/Code in Rust/" data-id="cje9mytct000q4wvp4srh8yws" class="article-share-link">Share</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Note/">Note</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Rust/">Rust</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/11/11/Bojack Horseman S1E7/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Bojack Horseman S1E7
        
      </div>
    </a>
  
  
    <a href="/2016/10/28/Bojack Horseman S1E6/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Bojack Horseman S1E6</div>
    </a>
  
</nav>

  
</article>

</section>
      
      <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bojack-Horseman/">Bojack Horseman</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cmake/">Cmake</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Note/">Note</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/">Python</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Rust/">Rust</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/书摘/">书摘</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Bojack-Horseman/" style="font-size: 20px;">Bojack Horseman</a> <a href="/tags/Cmake/" style="font-size: 10px;">Cmake</a> <a href="/tags/Note/" style="font-size: 17.5px;">Note</a> <a href="/tags/Python/" style="font-size: 15px;">Python</a> <a href="/tags/Rust/" style="font-size: 12.5px;">Rust</a> <a href="/tags/书摘/" style="font-size: 12.5px;">书摘</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a><span class="archive-list-count">5</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/02/28/Cmake/">Cmake</a>
          </li>
        
          <li>
            <a href="/2016/12/15/Bojack Horseman S1E12/">Bojack Horseman S1E12</a>
          </li>
        
          <li>
            <a href="/2016/12/10/Bojack Horseman S1E11/">Bojack Horseman S1E11</a>
          </li>
        
          <li>
            <a href="/2016/12/09/Bojack Horseman S1E10/">Bojack Horseman S1E10</a>
          </li>
        
          <li>
            <a href="/2016/12/08/Bojack Horseman S1E9/">Bojack Horseman S1E9</a>
          </li>
        
      </ul>
    </div>
  </div>

  
  <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=300 height=450 src="https://music.163.com/outchain/player?type=0&id=61431256&auto=0&height=430"></iframe>
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 handsomeJian<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="totop"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->


<!-- 百度分享 start -->

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
                processEscapes: true
                    
}
  
        });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
tex2jax: {
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
                  
}
    
        });
</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Queue(function() {
            var all = MathJax.Hub.getAllJax(), i;
            for(i=0; i < all.length; i += 1) {
                            all[i].SourceElement().parentNode.className += ' has-jax';
                                    
            }
                
        });
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<script src="/js/script.js"></script>

</div>
</body>
</html>
